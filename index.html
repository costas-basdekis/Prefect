<html>
    <head>
        <meta charset="utf-8">
        <title>Prefect: A Caesar III inspired game</title>
        <style type="text/css">
            [name=description]:not(:checked) ~ #description {
                display: none;
            }
            [name=roadmap]:not(:checked) ~ #roadmap {
                display: none;
            }
            .hidden {
                display: none;
            }
        </style>
        <script type="text/javascript">
            function onCheck(el) {
                const prop = el.name;
                saveChecked(prop, el.checked);
            }

            function saveChecked(prop, checked) {
                const state = JSON.parse(
                    localStorage.getItem('displayOptions') || '{}');
                state[prop] = checked;
                localStorage.setItem('displayOptions', JSON.stringify(state));
            }

            function setCheck(el) {
                const prop = el.name;
                const _default = (el.dataset.default || "on") === "on";
                el.checked = shouldBeChecked(prop, _default);
            }

            function shouldBeChecked(prop, _default) {
                const state = JSON.parse(
                    localStorage.getItem('displayOptions') || '{}');
                if (!(prop in state)) {
                    state[prop] = _default;
                }
                return !!state[prop];
            }

            function setAllCheck() {
                const elements = document.getElementsByClassName('check');
                for (const el of elements) {
                    setCheck(el);
                }
            }

            window.onload = setAllCheck;
        </script>
    </head>
    <body>
        <input type="checkbox" name="description" id="check_description" class="check" onclick="onCheck(this)">
        <label for="check_description">Show description</label>
        <div id="description">
            <p>
                This an attempt to reproduce Caesar III mechanics. Hopefully it will
                be possible to play a full game!
            </p>
        </div>
        <input type="checkbox" name="roadmap" id="check_roadmap" class="check" onclick="onCheck(this)" data-default="off">
        <label for="check_roadmap">Show feature roadmap</label>
        <div id="roadmap">
            <p>
                Current features:
                <ul>
                    <li>Display a grid with various types of terrain</li>
                    <li>Have a toolbox</li>
                    <li>Select tiles according to toolbox selection type</li>
                    <li>Make roads and clear tools work</li>
                    <li>Add houses</li>
                    <li>Implement newcomers, and house level and occupancy</li>
                    <li>People that seek workers on the streets</li>
                    <li>Find workers on the street</li>
                    <li>Service workers</li>
                    <li>Farms, granaries</li>
                    <li>Push finished goods</li>
                    <li>Markets</li>
                    <li>Goods deliverers and seekers</li>
                    <li>Service workers</li>
                    <li>Temples &amp; priests</li>
                </ul>
            </p>
            <p>
                Working on:
                <ul>
                    <li>Determine worker percentage</li>
                    <li>Allocate workers via available workers</li>
                </ul>
            </p>
            <p>
                Next features:
                <ul>
                    <li>Allocate workers per industry</li>
                    <li>Proper demographics</li>
                    <li>Fire &amp; damage</li>
                    <li>Reservoirs and fountains</li>
                    <li>Map editor</li>
                    <li>Procedural random map generation</li>
                </ul>
            </p>
        </div>
        <div id="app" />
        <script src="src/client/public/bundle.js" type="text/javascript"></script>
    </body>
</html>
